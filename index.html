<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Ultra-Premium V2</title>
<style>
body {margin:0;background:#111;color:white;font-family:Arial;text-align:center;user-select:none;}
h1,h2{margin:5px;}
#menu,#shop{display:flex;flex-direction:column;gap:15px;margin-top:20px;}
.btn{background:#222;padding:15px;border-radius:12px;font-size:20px;width:250px;margin:auto;cursor:pointer;}
.btn:hover{background:#333;}
#game{background:#000;display:none;margin-top:20px;}
#controls{display:none;flex-direction:column;gap:10px;align-items:center;}
.row{display:flex;gap:15px;justify-content:center;}
.control{width:90px;height:90px;background:#444;border-radius:20px;font-size:50px;display:flex;justify-content:center;align-items:center;cursor:pointer;border:4px solid #fff;box-shadow:0 0 12px rgba(255,255,255,0.5);transition:0.15s;}
.control:active{background:#666; transform:scale(0.9); box-shadow:0 0 20px rgba(255,255,255,0.7);}
.skinBtn{width:60px;height:60px;border-radius:10px; border:3px solid transparent; cursor:pointer; margin:5px;}
.skinSel{border-color:white !important; box-shadow:0 0 10px rgba(255,255,255,0.7);}
#musicBtn{margin-top:10px;}
canvas{touch-action:none;}
</style>
</head>
<body>

<h1>üêç Snake Ultra-Premium V2</h1>
<div id="menu">
  <div id="scoreDisplay">Score: 0</div>
  <div id="coinDisplay">Coins: 0</div>
  <div class="btn" onclick="startGame()">‚ñ∂Ô∏è Start Game</div>
  <div class="btn" onclick="openShop()">üõí Shop</div>
  <div class="btn" id="musicBtn" onclick="toggleMusic()">üîä Muziek: Aan</div>
  <div id="highscoreDisplay">Highscore: 0</div>
  <div id="achievementDisplay">Achievements: 0</div>
</div>

<div id="shop" style="display:none;">
  <h2>üõí Shop</h2>
  <div id="skinsContainer" style="display:flex; flex-wrap:wrap; justify-content:center; gap:10px;"></div>
  <div class="btn" onclick="closeShop()">‚¨ÖÔ∏è Back</div>
</div>

<canvas id="game" width="400" height="400"></canvas>
<h2 id="score" style="display:none;">Score:0</h2>

<div id="controls">
  <div class="row"><div class="control" onclick="dir(0,-1)">‚¨ÜÔ∏è</div></div>
  <div class="row">
    <div class="control" onclick="dir(-1,0)">‚¨ÖÔ∏è</div>
    <div class="control" onclick="dir(1,0)">‚û°Ô∏è</div>
  </div>
  <div class="row"><div class="control" onclick="dir(0,1)">‚¨áÔ∏è</div></div>
</div>

<audio id="bgMusic" loop>
<source src="https://cdn.pixabay.com/download/audio/2023/07/29/audio_c6f1f2a7ff.mp3?filename=upbeat-chiptune-game-115619.mp3" type="audio/mpeg">
</audio>

<script>
/* --- GAME VARIABLES --- */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const grid=20;
let snake=[],dx=grid,dy=0,food,score=0,coins=0,skin="lime",gameLoopId,powerUps=[];
let highscore=parseInt(localStorage.getItem("snakeHS"))||0;
let ownedSkins=JSON.parse(localStorage.getItem("snakeSkins"))||["lime"];
let coinAmount=parseInt(localStorage.getItem("snakeCoins"))||0;
let achievements=JSON.parse(localStorage.getItem("snakeAchievements"))||[];
document.getElementById("highscoreDisplay").innerText="Highscore:"+highscore;
document.getElementById("coinDisplay").innerText="Coins:"+coinAmount;
document.getElementById("achievementDisplay").innerText="Achievements:"+achievements.length;

/* --- MUSIC CONTROL --- */
let musicPlaying=true;
const bgMusic=document.getElementById("bgMusic");
bgMusic.volume=0.2;
bgMusic.play();

function toggleMusic(){
  if(musicPlaying){bgMusic.pause(); musicPlaying=false; document.getElementById("musicBtn").innerText="üîá Muziek: Uit";}
  else{bgMusic.play(); musicPlaying=true; document.getElementById("musicBtn").innerText="üîä Muziek: Aan";}
}

/* --- SKINS & SHOP --- */
const allSkins=[
  {color:"lime",price:0},{color:"red",price:5},{color:"blue",price:10},
  {color:"purple",price:15},{color:"orange",price:20},{color:"pink",price:25},
  {color:"cyan",price:30},{color:"gold",price:50},{color:"silver",price:40},
  {color:"brown",price:10},{color:"teal",price:20},{color:"magenta",price:35},
  {color:"navy",price:25},{color:"limegreen",price:15},{color:"coral",price:30}];

function openShop(){
  document.getElementById("menu").style.display="none";
  document.getElementById("shop").style.display="flex";
  const container=document.getElementById("skinsContainer");
  container.innerHTML="";
  allSkins.forEach(s=>{
    const btn=document.createElement("div");
    btn.style.background=s.color;
    btn.className="skinBtn";
    if(ownedSkins.includes(s.color)) btn.classList.add("skinSel");
    btn.title=s.price+" coins";
    btn.onclick=()=>buySkin(s.color,s.price,btn);
    container.appendChild(btn);
  });
}

function buySkin(c,p,btn){
  if(ownedSkins.includes(c)){skin=c; updateSkinSelection(); return;}
  if(coinAmount>=p){coinAmount-=p; ownedSkins.push(c); localStorage.setItem("snakeCoins",coinAmount); localStorage.setItem("snakeSkins",JSON.stringify(ownedSkins)); skin=c; updateSkinSelection();}
  document.getElementById("coinDisplay").innerText="Coins:"+coinAmount;
}

function updateSkinSelection(){
  document.querySelectorAll(".skinBtn").forEach(el=>el.classList.remove("skinSel"));
  document.querySelectorAll(".skinBtn").forEach(el=>{if(ownedSkins.includes(el.style.background)) el.classList.add("skinSel");});
}

/* --- GAME CONTROL --- */
function startGame(){
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="block";
  document.getElementById("score").style.display="block";
  document.getElementById("controls").style.display="flex";
  resetGame();
  gameLoop();
}
function closeShop(){
  document.getElementById("shop").style.display="none";
  document.getElementById("menu").style.display="flex";
}

/* --- GAME LOGIC --- */
function resetGame(){
  snake=[{x:200,y:200}];
  dx=grid; dy=0;
  score=0;
  food=randomFood();
  powerUps=[];
  document.getElementById("score").innerText="Score:"+score;
}
function randomFood(){return {x:Math.floor(Math.random()*20)*grid,y:Math.floor(Math.random()*20)*grid};}
function dir(x,y){if(dx!==-x*grid && dy!==-y*grid){dx=x*grid;dy=y*grid;}}
document.addEventListener("keydown",e=>{if(e.key==="ArrowUp") dir(0,-1); if(e.key==="ArrowDown") dir(0,1); if(e.key==="ArrowLeft") dir(-1,0); if(e.key==="ArrowRight") dir(1,0);});

/* --- ACHIEVEMENTS --- */
function checkAchievements(){
  if(score>=10 && !achievements.includes("Score10")){achievements.push("Score10");alert("Achievement unlocked: Score 10!");}
  if(coinAmount>=50 && !achievements.includes("Coins50")){achievements.push("Coins50");alert("Achievement unlocked: 50 Coins!");}
  if(ownedSkins.length>=5 && !achievements.includes("Skins5")){achievements.push("Unlock 5 Skins!");alert("Achievement unlocked: 5 skins!");}
  localStorage.setItem("snakeAchievements",JSON.stringify(achievements));
  document.getElementById("achievementDisplay").innerText="Achievements:"+achievements.length;
}

/* --- GAME LOOP --- */
function gameLoop(){
  gameLoopId=setTimeout(gameLoop,120);
  let head={x:snake[0].x+dx,y:snake[0].y+dy};
  if(head.x<0||head.x>=canvas.width||head.y<0||head.y>=canvas.height||snake.some(p=>p.x===head.x&&p.y===head.y)){gameOver();return;}
  snake.unshift(head);
  // power-ups spawn
  if(Math.random()<0.01) powerUps.push({x:Math.floor(Math.random()*20)*grid,y:Math.floor(Math.random()*20)*grid,type:"coin",timer:100});
  if(head.x===food.x&&head.y===food.y){score++;coinAmount++;localStorage.setItem("snakeCoins",coinAmount);document.getElementById("coinDisplay").innerText="Coins:"+coinAmount;document.getElementById("score").innerText="Score:"+score; if(score>highscore){highscore=score; localStorage.setItem("snakeHS",highscore);document.getElementById("highscoreDisplay").innerText="Highscore:"+highscore;} food=randomFood();}
  // snake trail
  draw();
  checkAchievements();
  // decrease power-ups timer
  powerUps.forEach((p,i)=>{p.timer--; if(p.timer<=0) powerUps.splice(i,1);});
}

/* --- DRAW FUNCTION --- */
function draw(){
  ctx.fillStyle="black"; ctx.fillRect(0,0,canvas.width,canvas.height);
  // draw power-ups
  powerUps.forEach(p=>{ctx.fillStyle="yellow"; ctx.fillRect(p.x,p.y,grid,grid);});
  // snake trail effect
  snake.forEach((p,i)=>{
    ctx.fillStyle=i===0?skin:"rgba(255,255,255,"+(0.3*i/snake.length)+")";
    ctx.fillRect(p.x,p.y,grid,grid);
  });
  ctx.fillStyle="red"; ctx.fillRect(food.x,food.y,grid,grid);
}

/* --- GAME OVER --- */
function gameOver(){alert("Game Over!\nScore:"+score);location.reload();}
</script>
</body>
</html>
    <div id="highscoreDisplay">üèÜ Highscore: 0</div>
</div>

<!-- GAME -->
<canvas id="game" width="400" height="400" style="display:none;"></canvas>
<h2 id="score" style="display:none;">Score: 0</h2>

<!-- TOUCH CONTROLS -->
<div id="controls">
    <div class="row">
        <div class="control" onclick="dir(0,-1)">‚¨ÜÔ∏è</div>
    </div>
    <div class="row">
        <div class="control" onclick="dir(-1,0)">‚¨ÖÔ∏è</div>
        <div class="control" onclick="dir(1,0)">‚û°Ô∏è</div>
    </div>
    <div class="row">
        <div class="control" onclick="dir(0,1)">‚¨áÔ∏è</div>
    </div>
</div>

<script>
/* VARIABELEN */
let canvas = document.getElementById("game");
let ctx = canvas.getContext("2d");

let grid = 20;
let snake = [];
let dx = grid, dy = 0;
let food;
let score = 0;
let skin = "lime";
let gameLoopId;

let highscore = localStorage.getItem("snakeHS") || 0;
document.getElementById("highscoreDisplay").innerText = "üèÜ Highscore: " + highscore;

/* MENU */
function setSkin(s) {
    skin = s;
    document.querySelectorAll(".skin").forEach(el => el.classList.remove("sel"));
    event.target.classList.add("sel");
}

function startGame() {
    document.getElementById("menu").style.display = "none";
    canvas.style.display = "block";
    document.getElementById("score").style.display = "block";
    document.getElementById("controls").style.display = "flex";

    resetGame();
    gameLoop();
}

/* GAME LOGICA */
function resetGame() {
    snake = [{x: 200, y: 200}];
    dx = grid;
    dy = 0;
    score = 0;
    document.getElementById("score").innerText = "Score: 0";
    food = randomFood();
}

function randomFood() {
    return {
        x: Math.floor(Math.random() * 20) * grid,
        y: Math.floor(Math.random() * 20) * grid,
    };
}

/* MOBIEL EN PC BESTURING - 100% WERKEND */
function dir(x, y) {
    if (dx !== -x * grid && dy !== -y * grid) {
        dx = x * grid;
        dy = y * grid;
    }
}

document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowUp") dir(0, -1);
    if (e.key === "ArrowDown") dir(0, 1);
    if (e.key === "ArrowLeft") dir(-1, 0);
    if (e.key === "ArrowRight") dir(1, 0);
});

/* GAME LOOP */
function gameLoop() {
    gameLoopId = setTimeout(gameLoop, 120);

    let head = { x: snake[0].x + dx, y: snake[0].y + dy };

    // Game over?
    if (
        head.x < 0 || head.x >= canvas.width ||
        head.y < 0 || head.y >= canvas.height ||
        snake.some((p) => p.x === head.x && p.y === head.y)
    ) {
        alert("Game Over!\nScore: " + score);
        location.reload();
        return;
    }

    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
        score++;
        document.getElementById("score").innerText = "Score: " + score;

        if (score > highscore) {
            highscore = score;
            localStorage.setItem("snakeHS", highscore);
        }

        food = randomFood();
    } else {
        snake.pop();
    }

    draw();
}

function draw() {
    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = skin;
    snake.forEach((p) => ctx.fillRect(p.x, p.y, grid, grid));

    ctx.fillStyle = "red";
    ctx.fillRect(food.x, food.y, grid, grid);
}
</script>

</body>
</html>
